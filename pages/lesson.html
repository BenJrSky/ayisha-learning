<main class="container" @json="/courses/{_params[0]}.json" @result="course"
  @then="currentLesson=course.lessons.find(lesson => lesson.id==_params[1])">

  <section class="hero">
    <div class="hero-background"></div>
    <div class="hero-content">
      <img src="/ayisha-logo-black.png" alt="Ayisha.js Logo" class="hero-logo">

      <!-- Breadcrumb statico -->
      <nav class="breadcrumbs text-capitalize" style="margin-bottom: 0.75rem;">
        <a href="#" @link="home">Home</a>
        <span> ‚Ä∫ </span>
        <a href="#" @link="course/{_params[0]}" title="Vai alla pagina del corso">{{_params[0]}}</a>
      </nav>

      <h1 @text="currentLesson.title">Titolo della Lezione</h1>
      <p @text="currentLesson.summary" class="hero-subtitle">Sottotitolo/riassunto breve della lezione: cosa imparerai
        in questa unit√†.</p>

      <!-- Meta lezione -->
      <div class="course-meta" style="justify-content:center;">
        <span class="course-lessons">‚è± {{currentLesson.minutes}} min</span>
        <span class="course-language">üìñ Lesson {{currentLesson.order + 1}} of {{course.lessons.length}}</span>
      </div>

      <a class="cta" href="#" @link="/course/{_params[0]}" title="Back to course page">Back to course</a>
    </div>
  </section>

  <section class="install">
    <h2>Lesson Content</h2>

    <span @for="content in currentLesson.content">
      <p @if="content.type=='text'">{{content.value}}</p>
      <div @if="content.type=='tip'" class="tip">{{content.value}}</div>
      <pre class="pre-code" @if="content.type=='code'"><code>{{content.value}}</code></pre>
    </span>

  </section>

  <section class="install" @if="currentLesson.examples.length">
    <h2>Examples</h2>
    <span @for="example in currentLesson.examples">
      <p>{{example.description}}</p>
      <pre class="pre-code"><code>{{example.code}}</code></pre>
    </span>
  </section>

  <!-- Quiz con radio -->
  <section class="lesson-quiz" @if="(currentLesson.quiz || []).length">
    <h2 class="quiz-title">Quiz</h2>
    <ol class="quiz-list">
      <li class="quiz-item" @for="q in currentLesson.quiz" @key="q.id">
        <p class="quiz-prompt">{{q.prompt}}</p>

        <div class="quiz-options">
          <label class="quiz-option"  @class="{'true':q.answer==q.check, 'false':q.answer!=q.check}" @for="i, opt in q.options" @click="q.check=i">
            <span class="quiz-option-text">{{opt}}</span>
          </label>
        </div>

        <h2>{{q.answer}}</h2>
        <h2>{{q.check}}</h2>

        <div class="quiz-actions">
          <button class="quiz-toggle-btn ayisha-btn" @click="q.revealed = !q.revealed">
            {{ q?.revealed ? 'Nascondi soluzione' : 'Mostra soluzione' }}
          </button>
        </div>

        <div class="quiz-feedback" @show="q.revealed">
          <p class="quiz-result success" @show="q.selected==q.answer">Corretto! ‚úÖ</p>
          <p class="quiz-result error" @show="q.selected!=q.answer">
            Risposta corretta: <strong>{{ q.options[q.answer] }}</strong>
          </p>
        </div>
      </li>
    </ol>
  </section>

  <section class="section">
    <h2>Lessons</h2>
    <ol>
      <li @for="lesson in (course?.lessons || []).sort((a,b)=> (a.order||0)-(b.order||0))" @key="lesson.id"
        class="lesson-item">
        <component @src="/components/sections/lesson-ltem.html" #slugcourse="_params[0]" #datalesson="lesson">
        </component>
      </li>
    </ol>
    <p class="tip" style="margin-top:1.5rem;">All lessons are accessible, keyboard-friendly, and use semantic HTML.</p>
  </section>

  <nav class="page-nav">
    <a href="#" @link="course/{_params[0]}">‚Üê Back to course</a>
    <a href="#" @link="courses">All Courses ‚Üí</a>
  </nav>
</main>