<section class="tutorial-container">
  <div class="tutorial-header">
    <h2>ğŸ“ Todo App Tutorial</h2>
    <p>Learn Ayisha.js by building a complete todo application with all essential features.</p>
    <div class="tutorial-progress">
      <div class="progress-bar">
        <div class="progress-fill" @style="{width: (currentStep / 8) * 100 + '%'}"></div>
      </div>
      <span class="progress-text">Step <span @text="currentStep"></span> of 8</span>
    </div>
  </div>

  <!-- Step 1: Basic Setup -->
  <div class="tutorial-step" @show="currentStep === 1">
    <div class="step-header">
      <span class="step-number">1</span>
      <h3>Basic Setup & Input</h3>
    </div>
    <p class="step-description">
      Let's start by creating a simple input field to add new todos. We'll use <code>@model</code> for two-way data
      binding.
    </p>

    <div class="live-demo">
      <h4>ğŸ¯ Live Demo</h4>
      <div class="demo-container">
        <input @model="newTodo" placeholder="What needs to be done?" class="todo-input">
        <p @if="newTodo">You're typing: "<strong @text="newTodo"></strong>"</p>
      </div>
    </div>

    <div class="code-example">
      <h4>ğŸ“‹ Code</h4>
      <pre><code><no><input @model="newTodo" placeholder="What needs to be done?">
<p @if="newTodo">You're typing: "<strong @text="newTodo"></strong>"</p></no></code></pre>
    </div>

    <div class="step-explanation">
      <p><strong>@model</strong> creates two-way data binding between the input and the <code>newTodo</code> variable.
      </p>
      <p><strong>@if</strong> conditionally shows content when <code>newTodo</code> has a value.</p>
      <p><strong>@text</strong> displays the dynamic content safely.</p>
    </div>

    <component @src="components/step-component.html" #next="2" #prev="1" #totalSteps="8"></component>

  </div>

  <!-- Step 2: Adding Todos -->
  <div class="tutorial-step" @show="currentStep === 2">
    <div class="step-header">
      <span class="step-number">2</span>
      <h3>Adding Todos with @click</h3>
    </div>
    <p class="step-description">
      Now let's add a button to create new todos and store them in an array using <code>@click</code>.
    </p>

    <div class="live-demo">
      <h4>ğŸ¯ Live Demo</h4>
      <div class="demo-container">
        <div class="todo-form">
          <input @model="newTodo" placeholder="What needs to be done?" class="todo-input">
          <button @click="todos.push({id: Date.now(), text: newTodo, completed: false}); newTodo = ''"
            @class="{disabled: !newTodo.trim()}" class="btn btn-primary">Add Todo</button>
        </div>
        <div class="todo-count" @if="todos.length">
          <p>Total todos: <strong @text="todos.length"></strong></p>
        </div>
      </div>
    </div>

    <div class="code-example">
      <h4>ğŸ“‹ Code</h4>
      <pre><code><no><button @click="todos.push({id: Date.now(), text: newTodo, completed: false}); newTodo = ''" 
        @class="{disabled: !newTodo.trim()}">
  Add Todo
</button></no></code></pre>
    </div>

    <div class="step-explanation">
      <p><strong>@click</strong> executes JavaScript when the button is clicked.</p>
      <p><strong>@class</strong> conditionally applies CSS classes based on expressions.</p>
      <p>We create todo objects with <code>id</code>, <code>text</code>, and <code>completed</code> properties.</p>
    </div>

  </div>

  <!-- Step 3: Displaying Todos -->
  <div class="tutorial-step" @show="currentStep === 3">
    <div class="step-header">
      <span class="step-number">3</span>
      <h3>Displaying Todos with @for</h3>
    </div>
    <p class="step-description">
      Let's display our todos using <code>@for</code> to loop through the array and <code>@key</code> for efficient
      updates.
    </p>

    <div class="live-demo">
      <h4>ğŸ¯ Live Demo</h4>
      <div class="demo-container">
        <div class="todo-form">
          <input @model="newTodo" placeholder="What needs to be done?" class="todo-input">
          <button @click="todos.push({id: Date.now(), text: newTodo, completed: false}); newTodo = ''"
            @class="{disabled: !newTodo.trim()}" class="btn btn-primary">Add Todo</button>
        </div>

        <div class="todo-list" @if="todos.length">
          <div @for="todo in todos" @key="todo.id" class="todo-item">
            <input type="checkbox" @model="todo.completed" class="todo-checkbox">
            <span @text="todo.text" @class="{completed: todo.completed}" class="todo-text"></span>
            <span class="todo-id">ID: <span @text="todo.id"></span></span>
          </div>
        </div>

        <p @if="!todos.length" class="empty-state">No todos yet. Add one above!</p>
      </div>
    </div>

    <div class="code-example">
      <h4>ğŸ“‹ Code</h4>
      <pre><code><no><div @for="todo in todos" @key="todo.id" class="todo-item">
  <input type="checkbox" @model="todo.completed">
  <span @text="todo.text" @class="{completed: todo.completed}"></span>
</div></no></code></pre>
    </div>

    <div class="step-explanation">
      <p><strong>@for</strong> loops through arrays or objects to render repeated elements.</p>
      <p><strong>@key</strong> provides a unique identifier for efficient DOM updates.</p>
      <p>We can bind to nested properties like <code>todo.completed</code> and <code>todo.text</code>.</p>
    </div>
  </div>

  <!-- Step 4: Delete Functionality -->
  <div class="tutorial-step" @show="currentStep === 4">
    <div class="step-header">
      <span class="step-number">4</span>
      <h3>Delete Todos</h3>
    </div>
    <p class="step-description">
      Add delete functionality using array methods and <code>@click</code> events.
    </p>

    <div class="live-demo">
      <h4>ğŸ¯ Live Demo</h4>
      <div class="demo-container">
        <div class="todo-form">
          <input @model="newTodo" placeholder="What needs to be done?" class="todo-input">
          <button @click="todos.push({id: Date.now(), text: newTodo, completed: false}); newTodo = ''"
            @class="{disabled: !newTodo.trim()}" class="btn btn-primary">Add Todo</button>
        </div>

        <div class="todo-list" @if="todos.length">
          <div @for="todo in todos" @key="todo.id" class="todo-item">
            <input type="checkbox" @model="todo.completed" class="todo-checkbox">
            <span @text="todo.text" @class="{completed: todo.completed}" class="todo-text"></span>
            <button @click="todos = todos.filter(t => t.id !== todo.id)" class="btn btn-danger btn-sm">Delete</button>
          </div>
        </div>

        <div class="todo-stats" @if="todos.length">
          <p>Active: <strong @text="todos.filter(t => !t.completed).length"></strong></p>
          <p>Completed: <strong @text="todos.filter(t => t.completed).length"></strong></p>
        </div>
      </div>
    </div>

    <div class="code-example">
      <h4>ğŸ“‹ Code</h4>
      <pre><code><no><button @click="todos = todos.filter(t => t.id !== todo.id)">
  Delete
</button></no></code></pre>
    </div>

    <div class="step-explanation">
      <p>We use JavaScript's <code>filter()</code> method to remove items from the array.</p>
      <p>The expression <code>t => t.id !== todo.id</code> keeps all todos except the one being deleted.</p>
      <p>Ayisha.js automatically re-renders when the <code>todos</code> array changes.</p>
    </div>
  </div>

  <!-- Step 5: Filtering -->
  <div class="tutorial-step" @show="currentStep === 5">
    <div class="step-header">
      <span class="step-number">5</span>
      <h3>Filtering with @switch and @case</h3>
    </div>
    <p class="step-description">
      Add filter buttons to show all, active, or completed todos using <code>@switch</code> and computed properties.
    </p>

    <div class="live-demo">
      <h4>ğŸ¯ Live Demo</h4>
      <div class="demo-container">
        <div class="todo-form">
          <input @model="newTodo" placeholder="What needs to be done?" class="todo-input">
          <button @click="todos.push({id: Date.now(), text: newTodo, completed: false}); newTodo = ''"
            @class="{disabled: !newTodo.trim()}" class="btn btn-primary">Add Todo</button>
        </div>

        <div class="filter-buttons" @if="todos.length">
          <button @click="filter = 'all'" @class="{active: filter === 'all'}" class="btn btn-outline">All</button>
          <button @click="filter = 'active'" @class="{active: filter === 'active'}"
            class="btn btn-outline">Active</button>
          <button @click="filter = 'completed'" @class="{active: filter === 'completed'}"
            class="btn btn-outline">Completed</button>
        </div>

        <div class="todo-list" @if="todos.length">
          <div
            @for="todo in (filter === 'all' ? todos : filter === 'active' ? todos.filter(t => !t.completed) : todos.filter(t => t.completed))"
            @key="todo.id" class="todo-item">
            <input type="checkbox" @model="todo.completed" class="todo-checkbox">
            <span @text="todo.text" @class="{completed: todo.completed}" class="todo-text"></span>
            <button @click="todos = todos.filter(t => t.id !== todo.id)" class="btn btn-danger btn-sm">Delete</button>
          </div>
        </div>

        <div class="current-filter" @if="todos.length">
          <p>Showing: <strong @text="filter"></strong> todos</p>
        </div>
      </div>
    </div>

    <div class="code-example">
      <h4>ğŸ“‹ Code</h4>
      <pre><code><no><div @for="todo in (filter === 'all' ? todos : 
                    filter === 'active' ? todos.filter(t => !t.completed) : 
                    todos.filter(t => t.completed))" 
     @key="todo.id">
  <!-- todo content -->
</div></no></code></pre>
    </div>

    <div class="step-explanation">
      <p>We use ternary operators to conditionally filter the todos array.</p>
      <p>The <code>filter</code> variable controls which todos are displayed.</p>
      <p>JavaScript's <code>filter()</code> method creates new arrays without modifying the original.</p>
    </div>
  </div>

  <!-- Step 6: Edit Functionality -->
  <div class="tutorial-step" @show="currentStep === 6">
    <div class="step-header">
      <span class="step-number">6</span>
      <h3>Inline Editing</h3>
    </div>
    <p class="step-description">
      Add the ability to edit todos inline by double-clicking, using conditional rendering.
    </p>

    <div class="live-demo">
      <h4>ğŸ¯ Live Demo</h4>
      <div class="demo-container">
        <div class="todo-form">
          <input @model="newTodo" placeholder="What needs to be done?" class="todo-input">
          <button @click="todos.push({id: Date.now(), text: newTodo, completed: false}); newTodo = ''"
            @class="{disabled: !newTodo.trim()}" class="btn btn-primary">Add Todo</button>
        </div>

        <div class="todo-list" @if="todos.length">
          <div @for="todo in todos" @key="todo.id" class="todo-item">
            <input type="checkbox" @model="todo.completed" class="todo-checkbox">

            <!-- View Mode -->
            <span @if="editingId !== todo.id" @text="todo.text" @class="{completed: todo.completed}"
              @click="editingId = todo.id; editingText = todo.text" class="todo-text editable">Double-click to
              edit</span>

            <!-- Edit Mode -->
            <input @if="editingId === todo.id" @model="editingText" @blur="todo.text = editingText; editingId = null"
              @focus="this.select()" class="todo-edit-input">

            <button @click="todos = todos.filter(t => t.id !== todo.id)" class="btn btn-danger btn-sm">Delete</button>
          </div>
        </div>

        <p @if="editingId" class="edit-hint">Press Enter or click outside to save changes</p>
      </div>
    </div>

    <div class="code-example">
      <h4>ğŸ“‹ Code</h4>
      <pre><code><no><!-- View Mode -->
<span @if="editingId !== todo.id" 
      @click="editingId = todo.id; editingText = todo.text">
  {{todo.text}}
</span>

<!-- Edit Mode -->
<input @if="editingId === todo.id" 
       @model="editingText" 
       @blur="todo.text = editingText; editingId = null"></no></code></pre>
    </div>

    <div class="step-explanation">
      <p><strong>@blur</strong> triggers when an input loses focus, perfect for saving edits.</p>
      <p><strong>@focus</strong> triggers when an element gains focus, useful for selecting text.</p>
      <p>We use <code>editingId</code> to track which todo is being edited.</p>
    </div>
  </div>

  <!-- Step 7: Bulk Actions -->
  <div class="tutorial-step" @show="currentStep === 7">
    <div class="step-header">
      <span class="step-number">7</span>
      <h3>Bulk Actions</h3>
    </div>
    <p class="step-description">
      Add bulk actions like "Mark All Complete" and "Clear Completed" using array methods.
    </p>

    <div class="live-demo">
      <h4>ğŸ¯ Live Demo</h4>
      <div class="demo-container">
        <div class="todo-form">
          <input @model="newTodo" placeholder="What needs to be done?" class="todo-input">
          <button @click="todos.push({id: Date.now(), text: newTodo, completed: false}); newTodo = ''"
            @class="{disabled: !newTodo.trim()}" class="btn btn-primary">Add Todo</button>
        </div>

        <div class="bulk-actions" @if="todos.length">
          <button @click="todos.forEach(t => t.completed = true)" @class="{disabled: todos.every(t => t.completed)}"
            class="btn btn-outline">Mark All Complete</button>
          <button @click="todos.forEach(t => t.completed = false)" @class="{disabled: todos.every(t => !t.completed)}"
            class="btn btn-outline">Mark All Active</button>
          <button @click="todos = todos.filter(t => !t.completed)" @class="{disabled: !todos.some(t => t.completed)}"
            class="btn btn-warning">Clear Completed</button>
        </div>

        <div class="todo-list" @if="todos.length">
          <div @for="todo in todos" @key="todo.id" class="todo-item">
            <input type="checkbox" @model="todo.completed" class="todo-checkbox">
            <span @text="todo.text" @class="{completed: todo.completed}" class="todo-text"></span>
            <button @click="todos = todos.filter(t => t.id !== todo.id)" class="btn btn-danger btn-sm">Delete</button>
          </div>
        </div>

        <div class="todo-summary" @if="todos.length">
          <p>Total: <strong @text="todos.length"></strong> |
            Active: <strong @text="todos.filter(t => !t.completed).length"></strong> |
            Completed: <strong @text="todos.filter(t => t.completed).length"></strong></p>
        </div>
      </div>
    </div>

    <div class="code-example">
      <h4>ğŸ“‹ Code</h4>
      <pre><code><no><button @click="todos.forEach(t => t.completed = true)" 
        @class="{disabled: todos.every(t => t.completed)}">
  Mark All Complete
</button>

<button @click="todos = todos.filter(t => !t.completed)" 
        @class="{disabled: !todos.some(t => t.completed)}">
  Clear Completed
</button></no></code></pre>
    </div>

    <div class="step-explanation">
      <p><strong>forEach()</strong> executes a function for each array element.</p>
      <p><strong>every()</strong> returns true if all elements pass a test.</p>
      <p><strong>some()</strong> returns true if at least one element passes a test.</p>
    </div>
  </div>

  <!-- Step 8: Local Storage -->
  <div class="tutorial-step" @show="currentStep === 8">
    <div class="step-header">
      <span class="step-number">8</span>
      <h3>Persistence with @watch</h3>
    </div>
    <p class="step-description">
      Save todos to localStorage and load them on page refresh using <code>@watch</code>.
    </p>

    <div class="live-demo">
      <h4>ğŸ¯ Live Demo</h4>
      <div class="demo-container" @watch="todos => localStorage.setItem('ayisha-todos', JSON.stringify(todos))">
        <div class="todo-form">
          <input @model="newTodo" placeholder="What needs to be done?" class="todo-input">
          <button @click="todos.push({id: Date.now(), text: newTodo, completed: false}); newTodo = ''"
            @class="{disabled: !newTodo.trim()}" class="btn btn-primary">Add Todo</button>
        </div>

        <div class="storage-info">
          <p>âœ… Your todos are automatically saved to localStorage!</p>
          <button @click="localStorage.removeItem('ayisha-todos'); todos = []" class="btn btn-warning btn-sm">Clear
            Storage</button>
        </div>

        <div class="todo-list" @if="todos.length">
          <div @for="todo in todos" @key="todo.id" class="todo-item">
            <input type="checkbox" @model="todo.completed" class="todo-checkbox">
            <span @text="todo.text" @class="{completed: todo.completed}" class="todo-text"></span>
            <button @click="todos = todos.filter(t => t.id !== todo.id)" class="btn btn-danger btn-sm">Delete</button>
          </div>
        </div>

        <p @if="!todos.length" class="empty-state">No todos found. Add some above or they'll be loaded from storage on
          page refresh!</p>
      </div>
    </div>

    <div class="code-example">
      <h4>ğŸ“‹ Code</h4>
      <pre><code><no><!-- Watch for changes and save to localStorage -->
<div @watch="todos => localStorage.setItem('ayisha-todos', JSON.stringify(todos))">
  <!-- todo app content -->
</div>

<!-- In <init> block -->
<init>
  // Load todos from localStorage on startup
  const savedTodos = localStorage.getItem('ayisha-todos');
  todos = savedTodos ? JSON.parse(savedTodos) : [];
</init></no></code></pre>
    </div>

    <div class="step-explanation">
      <p><strong>@watch</strong> executes code whenever the watched value changes.</p>
      <p><strong>localStorage</strong> provides persistent storage in the browser.</p>
      <p><strong>JSON.stringify/parse</strong> converts objects to/from JSON strings.</p>
    </div>
  </div>



  <!-- Completion -->
  <div class="tutorial-completion" @show="currentStep === 8">
    <div class="completion-card">
      <h3>ğŸ‰ Congratulations!</h3>
      <p>You've built a complete Todo application using Ayisha.js! You've learned:</p>
      <ul>
        <li>âœ… Two-way data binding with <code>@model</code></li>
        <li>âœ… Event handling with <code>@click</code>, <code>@blur</code>, <code>@focus</code></li>
        <li>âœ… Conditional rendering with <code>@if</code> and <code>@show</code></li>
        <li>âœ… List rendering with <code>@for</code> and <code>@key</code></li>
        <li>âœ… Dynamic styling with <code>@class</code></li>
        <li>âœ… Data persistence with <code>@watch</code></li>
        <li>âœ… Array manipulation and filtering</li>
        <li>âœ… State management patterns</li>
      </ul>
      <div class="next-steps">
        <h4>What's Next?</h4>
        <button @click="selectedTutorial = 'weather'" class="btn btn-primary">Try Weather App Tutorial</button>
        <button @click="selectedTutorial = null; currentStep = 1" class="btn btn-outline">Choose Another
          Tutorial</button>
      </div>
    </div>
  </div>

      <component @src="components/step-progress.html"></component>


</section>